# 데이터 파이프라인 Specification

* 기존 데이터 파이프라인 시스템의 한계 및 문제점
  - 다양한 서비스들의 자유로운 연동과 실시간 대응, 서비스간 트랜잭션 처리등이 불가능:  다양한 플랫폼 기반(java, python, node..등)의 설치형 서비스 혹은 SaaS 서비스 들이 자유롭게 통합되고 서비스간 데이터 공유 및 데이터 쓰기(mutation) 의 트랜잭션 관리가 어려움
  - 서비스간의 강한 결합도: 데이터베이스 공유 혹은 직접 액세스, 혹은 중앙집중식 EAI 나 /동기식 서비스 연동 방식에 의한 연동으로 서비스간 결합도가 높아 시스템 변경에 대한 자율성 저하, 장애 발생시 장애 전파 문제 발생
  - 이는, 전체적으로 국민 서비스의 개선이나 서비스 질을 저해하는 요인으로 작용하고 있음
  - 정부 시스템 내의 데이터 (사용자 데이터, 처리 데이터, 환경데이터,...) 등, 빅데이터 분석용도의 국가 자원이 될 수 있는 데이터들이 체계적으로 관리되지 못하고 있으며, 특히 이후 시계열 분석 등의 토대가 될 수 있도록 시계열의 Historical 한 데이터의 형식으로 보존되지 못하고 있음.

>그림

* 개선 방안
  - Open API/Async API 등 Open 된 API 를 기반으로 서비스간 동기/비동기식 연동을 가능하게 함
  - 트랜잭션 처리에 있어서는 이벤트 기반의 통합 서비스/데이터 파이프라인을 구축하여 다양한 플랫폼 기반의 서비스간 결합도를 최소화하면서 시스템간 연동이 이루어질 수 있도록 함.
  - 세부적으로, 이벤트 기반의 Publish / Subscribe 형식의 비동기식 / 구독형 연동으로, 각 서비스나 설치형 서비스들이 각자의 플랫폼으로 구축될 수 있도록 하며 중앙의 데이터에 직접적인 액세스 없이도 각 서비스들은 이벤트 데이터를 수신하여 자체적인 데이터베이스 설계를 기반으로 한 Polyglot Database 를 구축할 수 있도록 함
  - 각 부처별 데이터 포맷의 통일이 어렵기 때문에 데이터 통합을 위한 Pub/Sub 기반으로 연동하여야 하며 Anti-corruption Layer(어댑터 및 데이터 매퍼) 를 기반으로 연동한다.
  - API 는 중앙의 API management tool 에 의하여 관리될 수 있도록 함. API management 에서는 API 가 Frontend API 인 경우 iframe API, script api, , Backend API 인 경우 Sync/Async 두가지 모델에 대한 표준 API 정의 Spec 인 Open API[] 와 Async API[] 를 적용함
  - 셀프서비스화/자동화된 프로비져닝을 위한 서비스 메타데이터 표준화:  서비스 사용자 (국민, 공공기관, 기업) 들이 다양한 공공서비스 및 민간 서비스들을 간단한 low-code/no-code 툴을 통하여 매시업하여 곧바로 통합된 서비스를 제공받을 수 있도록 하기 위해서는 일반 SaaS형식인 경우 서비스 가격 정보, 보안/인증, 데이터연동API, 프론트엔드API, 서비스연동API, 서비스 관리 / 커스터마이징 / 설정 API 등의 메타데이터들을 엑세스 할 수 있는 URI를 제공해주어야 하며, 설치형 서비스인 경우의 라이센싱 가격, 배포 인프라별 프로비저닝 자동화 스크립트 혹은 쿠버네티스의 경우 이미지명 혹은 helm chart 등의 설치 자동화 메타데이터가 표준화된 방식으로 제공되어야 함
  - 이러한 표준화된 서비스의 규격화가 어느정도 이루어져야만 마켓플레이스 등에서 유통될 수 있는 형식의 서비스 및 컴포넌트가 될 수 있으며, 이를 가칭으로 PBC (Packaged Business Service) 라고 일컬음 []

* 설계 원칙

  - 시스템 통합에 관련한 보다 유연한 연동을 위한 Composable Enterprise 개념을 차용함
```
  - Composable Enterprise는 비즈니스 요구 사항을 빠르게 충족하고 조정할 수 있는 유연하고 모듈화된 비즈니스 아키텍처를 지원하기 위해 설계된 개념입니다. 이를 위해서는 비즈니스 능력을 모듈화된 형태로 개발하고 배포할 수 있어야 합니다.
  - Packaged Business Capabilities(PBC)는 이러한 목표를 달성하기 위한 전략 중 하나로, 비즈니스 능력을 모듈화된 형태로 개발하여 조립 가능한 구성 요소로 제공합니다. 이를 통해 조립 가능한 PBC를 이용하여 비즈니스 요구 사항을 더 빠르게 구현할 수 있습니다.
  - CBD(Componet-Based Development)에서는 컴포넌트 또는 마이크로서비스가 PBC와 유사한 개념입니다. 그러나 PBC는 컴포넌트 또는 마이크로서비스보다 더 큰 범위의 비즈니스 능력을 가지고 있으며, 비즈니스 능력을 개발하는 것뿐만 아니라, 비즈니스 프로세스와 조직 구조를 포함한 비즈니스 전략을 모듈화하여 제공합니다. 따라서 PBC는 비즈니스 요구 사항을 더 적극적으로 충족시키고, 조직 전반에 걸쳐 재사용이 가능한 능력을 제공합니다.
```
  - 다음은 각 서비스들이 PBC 의 형태가 되기 위하여 갖추어야 할 요건 들입니다:
```
    - Self-descriptive :  Open API (sync API), Async API, endpoint url 정보, image 정보, 구현체, 빌드 방법, Dockerfile 등의 메타데이터를 포함하고 있어야 한다. diff: 일반 helm chart에 비해…
    - Self-contained:  Front-end 요소, backend, database, 내부적인 event platform이나 infra 요소들을 모두 가지고 있고 이들을 설치 구동할 수 있는 provisioning script 가 내재된 operator 형태로 존재한다.
    - Build-time 의 지원 (ci/cd)가 포함된다. on-prem설치, license 의 유형이 saas 형식이 아닌 licensed 혹은 오픈소스들의 빌드 단계를 동반하는 연동이 이루어질 수 있다.
    - 특정기술에 종속되지 않아야 한다:  webcomponents, open api/async api, cloud events, REST, CRI runtime (image) 등의 표준 혹은 적어도 10년 이상 유지될 수 있는 사실 표준을 준수해야 한다.
    - business bounded:   DDD 설계 전략이 녹아야 한다. 이를 설명하기 힘들것임.
    - Event-driven, pub/sub, white-board pattern 등 한 연동 (DDD) 등 loosely coupled 한 연동을 지향해야 한다.
```
  - 개인정보 보호 이슈:
